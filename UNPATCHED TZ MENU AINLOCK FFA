-- LocalScript - StarterPlayerScripts
-- Nome: TZMENU V2üî•‚ö°

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local Mouse = LocalPlayer:GetMouse()

-- GUI principal
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "TZMENU V2üî•‚ö°"
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Bot√£o de abrir menu
local OpenButton = Instance.new("TextButton")
OpenButton.Size = UDim2.new(0, 60, 0, 60)
OpenButton.Position = UDim2.new(0, 20, 0.5, -30)
OpenButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
OpenButton.Text = "‚ö°"
OpenButton.TextSize = 24
OpenButton.TextColor3 = Color3.fromRGB(255, 255, 255)
OpenButton.Parent = ScreenGui
OpenButton.BackgroundTransparency = 0.2
OpenButton.AutoButtonColor = true

-- Menu Frame
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 250, 0, 150)
MainFrame.Position = UDim2.new(0.5, -125, 0.5, -75)
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
MainFrame.BorderSizePixel = 0
MainFrame.Visible = false
MainFrame.Parent = ScreenGui
MainFrame.BackgroundTransparency = 0.1
MainFrame.ClipsDescendants = true

-- Tween de abertura
local function toggleMenu()
	if MainFrame.Visible == false then
		MainFrame.Visible = true
		MainFrame.Size = UDim2.new(0,0,0,0)
		local openTween = TweenService:Create(MainFrame, TweenInfo.new(0.4, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
			{Size = UDim2.new(0,250,0,150)})
		openTween:Play()
	else
		local closeTween = TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.In),
			{Size = UDim2.new(0,0,0,0)})
		closeTween:Play()
		closeTween.Completed:Connect(function()
			MainFrame.Visible = false
		end)
	end
end

OpenButton.MouseButton1Click:Connect(toggleMenu)

-- T√≠tulo
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1,0,0,30)
Title.BackgroundTransparency = 1
Title.Text = "üî• TZMENU V2 ‚ö°"
Title.TextColor3 = Color3.fromRGB(255, 200, 50)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 20
Title.Parent = MainFrame

-- Bot√µes
local function createButton(name, posY)
	local Btn = Instance.new("TextButton")
	Btn.Size = UDim2.new(0.9,0,0,40)
	Btn.Position = UDim2.new(0.05,0,0,posY)
	Btn.BackgroundColor3 = Color3.fromRGB(40,40,40)
	Btn.TextColor3 = Color3.fromRGB(255,255,255)
	Btn.TextSize = 18
	Btn.Font = Enum.Font.Gotham
	Btn.Text = name
	Btn.Parent = MainFrame
	Btn.AutoButtonColor = true
	Btn.BackgroundTransparency = 0.2
	return Btn
end

local AimlockBtn = createButton("üéØ AIMLOCK", 40)
local ESPBtn = createButton("üëÅ ESP", 90)

-------------------
-- AIMLOCK
-------------------
local Aimlock = false
local AimPart = "Head"

local function getClosestPlayer()
	local closest, dist = nil, math.huge
	for _,plr in pairs(Players:GetPlayers()) do
		if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild(AimPart) then
			local pos, vis = Camera:WorldToViewportPoint(plr.Character[AimPart].Position)
			if vis then
				local mag = (Vector2.new(Mouse.X, Mouse.Y) - Vector2.new(pos.X, pos.Y)).magnitude
				if mag < dist then
					dist = mag
					closest = plr
				end
			end
		end
	end
	return closest
end

RunService.RenderStepped:Connect(function()
	if Aimlock then
		local target = getClosestPlayer()
		if target and target.Character and target.Character:FindFirstChild(AimPart) then
			Camera.CFrame = CFrame.new(Camera.CFrame.Position, target.Character[AimPart].Position)
		end
	end
end)

AimlockBtn.MouseButton1Click:Connect(function()
	Aimlock = not Aimlock
	AimlockBtn.Text = Aimlock and "üéØ AIMLOCK [ON]" or "üéØ AIMLOCK [OFF]"
end)

-------------------
-- ESP
-------------------
local ESP = false
local Highlights = {}

local function toggleESP(state)
	ESP = state
	if ESP then
		for _,plr in pairs(Players:GetPlayers()) do
			if plr ~= LocalPlayer and plr.Character then
				if not Highlights[plr] then
					local hl = Instance.new("Highlight")
					hl.Parent = plr.Character
					hl.FillColor = Color3.fromRGB(255,0,0)
					hl.OutlineColor = Color3.fromRGB(255,255,255)
					hl.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
					Highlights[plr] = hl
				end
			end
		end
	else
		for _,hl in pairs(Highlights) do
			hl:Destroy()
		end
		Highlights = {}
	end
end

ESPBtn.MouseButton1Click:Connect(function()
	ESP = not ESP
	toggleESP(ESP)
	ESPBtn.Text = ESP and "üëÅ ESP [ON]" or "üëÅ ESP [OFF]"
end)
